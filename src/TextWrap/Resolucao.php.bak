<?php

namespace Galoa\ExerciciosPhp\TextWrap;

include("TextWrapInterface.php");
/**
 * Implemente sua resolução nessa classe.
 *
 * Depois disso:
 * - Crie um PR no github com seu código
 * - Veja o resultado da correção automática do seu código
 * - Commit até os testes passarem
 * - Passou tudo, melhore a cobertura dos testes
 * - Ficou satisfeito, envie seu exercício para a gente! <3
 *
 * Boa sorte :D
 */
class Resolucao implements TextWrapInterface {

  /**
   * {@inheritdoc}
   *
   * Apague o conteúdo do método abaixo e escreva sua própria implementação,
   * nós colocamos esse mock para poder rodar a análise de cobertura dos
   * testes unitários.
   */
  public function textWrap(string $text, int $length) : array{
     
    if(isset($text) && $length > 0){
        
      $linhas = [];                       
      $index = 0;                         
      $length_text = strlen($text);
      $last_space = 0;                    
      $i = 0;                             
      
      do {
        $text = trim($text);

        $char_now = substr($text, $i,1);

        if($char_now == " "){
          $last_space = $i;
        }

        if($i > $length){
          $last_space = ($last_space == 0) ? $length : $last_space;

          $linhas[$index] = substr($text,0, $last_space);
          $text = substr($text, $last_space-1, $length_text);
          $text = trim($text);
          $length_text = strlen($text);
          $index++;
          $i = 0;
          $last_space = 0;
        }else{
          $linhas[$index] = substr($text,0,strlen($text));
        }
        $i++;
      } while ($i < $length_text);
      return $linhas;
    }else{
       return [];
    }
  }
}

?>



// $linhas = [];
// $index = 0;
// $length_text = strlen($text);
// $last_space = 0;
// $i = 0;

// if (isset($text) && $length > 0) 
// {
// do {
// for($j = 0; $j > $length; $j++)
// {
// $char_now = substr($text, $j,1);
// if($char_now == " ")
// {
// $last_space = $j;
// }

// $last_space = ($last_space == 0) ? $length : $last_space;
// $linhas[$index] = substr($text,0, $last_space);
// $text = trim($text);
// $text = substr($text, $last_space, $length_text);
// $length_text = strlen($text);
// $index++;
// $last_space = 0;
// }

// $i++;
// }while($length_text > $i);
// return $linhas;
// } 


// $text = trim($text);
// $char_now = substr($text, $i,1);
// if($char_now == " ")
// {
//     $last_space = $i;
// }
// if($i > $length )
// {
//     $linhas[$index] = substr($text,0, $last_space);
//     $text = substr($text, $last_space, $length_text);
//     $length_text = strlen($text);
//     $index++;
//     $i = 0;
//     $last_space = 0;
// }
// else
// {
//     $linhas[$index] = substr($text,0, $last_space);
// }
// $i++;
// } 
// while ($i < $length_text);
